package parser

import (
	"parser/grammar"
	"parser/stack"
	"testing"

	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/suite"
)

type ParserTestSuite struct {
	suite.Suite
	g *grammar.Grammar
	p *parser
	w []grammar.Terminal
}

func (s *ParserTestSuite) SetupTest() {
	s.g = grammar.New("../grammar.txt")
	s.p = New()
	s.w = []grammar.Terminal{"aab"}
}

func (s *ParserTestSuite) TeardownTest() {
	s.p.Reset()
}

func (s *ParserTestSuite) TestExpand() {
	s.p.state = Normal
	s.p.index = 1
	s.p.ws = stack.New()
	s.p.is = stack.New()
	s.p.is.Push(s.g.StartingSymbol)

	s.p.expand(*s.g, s.w)

	assert.Equal(s.T(), s.p.state, Normal)
	assert.Equal(s.T(), s.p.index, 1)
  val,err :=s.p.is.Top()
	assert.Equal(s.T(), , s.g.StartingSymbol)
}

func (s *ParserTestSuite) TestAdvance() {

}

func (s *ParserTestSuite) TestMomentaryInsuccess() {

}

func (s *ParserTestSuite) TestBack() {

}

func (s *ParserTestSuite) TestError() {

}

func (s *ParserTestSuite) TestAnotherTry() {

}

func TestParserTestSuite(t *testing.T) {
	suite.Run(t, new(ParserTestSuite))
}
